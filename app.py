import os
import streamlit as st
from dotenv import load_dotenv

load_dotenv()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
DATABASE_URL = os.getenv("DATABASE_URL")
DB_SCHEMA = os.getenv("DB_SCHEMA", "stg")

if not DATABASE_URL:
    st.error("‚ö†Ô∏è –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è DATABASE_URL –≤ —Ñ–∞–π–ª–µ .env")
    st.stop()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(
    page_title="StarLine Reports GUI",
    page_icon="üìä",
    layout="wide",
    initial_sidebar_state="expanded"
)

# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
def main():
    st.title("üìä StarLine Reports GUI")
    st.markdown("---")
    
    st.header("üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã")
    st.write("""
    –°–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤–µ–¥–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø–æ —É—á–∞—Å—Ç–∫–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞, –≤–∫–ª—é—á–∞—é—â–∞—è:
    - üìã –í–µ–¥–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –ª–∏–Ω–∏—è–º A3 –∏ A4
    - üë• –£—á–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ –∏—Ö —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    - üìä –†–∞—Å—á–µ—Ç –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    - üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º–∏ SAP –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
    """)
    
    st.header("üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç")
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("üìã –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç")
        st.write("""
        1. –í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–æ–∫ –∏ –¥–∞—Ç—É
        2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ –ª–∏–Ω–∏—è–º
        3. –î–æ–±–∞–≤—å—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ç—á–µ—Ç
        """)
        if st.button("üìã –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ç—á–µ—Ç–∞–º", width='stretch'):
            st.switch_page("pages/reports.py")
    
    with col2:
        st.subheader("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏")
        st.write("""
        1. –ò–º–ø–æ—Ä—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ CSV
        2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SAP –∫–∞—Ç–∞–ª–æ–≥–æ–º
        3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
        """)
        if st.button("‚öôÔ∏è –ü–µ—Ä–µ–π—Ç–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º", width='stretch'):
            st.switch_page("pages/catalogs.py")
    
    st.header("üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
    st.info("""
    **–¢–µ–∫—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—á–∞—Å—Ç–∫–∞ "–ö–∞—Ç—é—à–∞" —Å –ª–∏–Ω–∏—è–º–∏ A3 –∏ A4
    - –†–∞—Å—á–µ—Ç –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤ —Å —É—á–µ—Ç–æ–º —Å–∫–∏–¥–æ–∫
    - –£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
    """)
    
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
    with st.expander("‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ"):
        st.write(f"**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** {DB_SCHEMA}")
        st.write(f"**–í–µ—Ä—Å–∏—è:** 1.0.0")
        st.write("**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** P2")

if __name__ == "__main__":
    main()
